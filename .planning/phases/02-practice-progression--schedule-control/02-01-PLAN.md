---
phase: 02-practice-progression--schedule-control
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - types/index.ts
  - lib/practices.ts
  - lib/storage.ts
  - lib/progress.ts
  - __tests__/lib/practices.test.ts
autonomous: true
must_haves:
  truths:
    - "Default program follows 6-week schedule without manual setup"
    - "Users can select a longer 8-week track"
    - "Post-week-4 schedule supports flexible pacing"
  artifacts:
    - path: "lib/practices.ts"
      provides: "Program-aware schedule logic"
    - path: "types/index.ts"
      provides: "ProgramMode + schedule settings types"
  key_links:
    - from: "lib/practices.ts"
      to: "types/index.ts"
      via: "ProgramMode, PracticeType"
      pattern: "ProgramMode"
---

<objective>
Introduce program-aware schedule logic with standard 6-week, extended 8-week, and flexible post-week-4 modes.

Purpose: enable schedule control needed for Phase 2 requirements.
Output: new program settings + schedule logic + tests.
</objective>

<execution_context>
@/Users/richardyu/.claude/get-shit-done/workflows/execute-plan.md
@/Users/richardyu/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-practice-progression--schedule-control/02-RESEARCH.md

# Core schedule files
@types/index.ts
@lib/practices.ts
@lib/storage.ts
@lib/progress.ts
@__tests__/lib/practices.test.ts
</context>

<tasks>

<task type="auto">
  <name>Add program mode + settings types</name>
  <files>types/index.ts, lib/storage.ts</files>
  <action>
    - Add `ProgramMode` type with `standard_6_week`, `extended_8_week`, `open_training`.
    - Add schedule settings to `UserSettings` (programMode, programStartDate, optional customPracticeSet).
    - Update storage defaults to include programMode and programStartDate (ISO string).
  </action>
  <verify>
    - Settings defaults contain a valid programMode and start date.
  </verify>
  <done>
    - Program settings are persisted and type-safe.
  </done>
</task>

<task type="auto">
  <name>Make schedule logic program-aware</name>
  <files>lib/practices.ts, lib/progress.ts, __tests__/lib/practices.test.ts</files>
  <action>
    - Add schedule helpers that accept programMode + customPracticeSet.
    - Default 6-week schedule mirrors current logic (weeks 1-4 alternation, weeks 5-6 continue anchor by default).
    - For `extended_8_week`, add weeks 7-8 as continuation weeks (anchor default or user-selected set).
    - For `open_training`, allow a custom practice set (1-2 practices) with a simple alternating rule.
    - Update `getCurrentWeek` / `getCurrentDay` to accept optional programStartDate from settings.
    - Update tests to cover 6-week default, 8-week extension, and open-training custom set behavior.
  </action>
  <verify>
    - `npm test -- __tests__/lib/practices.test.ts` passes.
  </verify>
  <done>
    - Schedule logic supports default, extended, and flexible continuation modes.
  </done>
</task>

</tasks>

<verification>
- Program mode is stored and used in schedule calculations.
- Default schedule remains intact when no customization is set.
</verification>

<success_criteria>
- Schedule functions can output a recommended practice for standard 6-week or extended 8-week tracks.
</success_criteria>

<output>
After completion, create `.planning/phases/02-practice-progression--schedule-control/02-01-SUMMARY.md`
</output>
