---
phase: 04-weekly-review--recommendations
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - types/index.ts
  - lib/progress.ts
  - lib/storage.ts
  - __tests__/lib/storage.test.ts
autonomous: true
must_haves:
  truths:
    - "Weekly aggregation returns total minutes, longest interval, and average lapses"
    - "Weekly aggregation includes recent journal highlights"
  artifacts:
    - path: "lib/progress.ts"
      provides: "Weekly summary aggregator"
  key_links:
    - from: "lib/progress.ts"
      to: "lib/storage.ts"
      via: "getSessions + getJournalEntries"
      pattern: "getSessions"
---

<objective>
Add weekly aggregation logic for metrics and journal highlights.

Purpose: power the weekly review UI and recommendation logic.
Output: new weekly summary helper + tests.
</objective>

<execution_context>
@/Users/richardyu/.claude/get-shit-done/workflows/execute-plan.md
@/Users/richardyu/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-weekly-review--recommendations/04-RESEARCH.md

@types/index.ts
@lib/progress.ts
@lib/storage.ts
</context>

<tasks>

<task type="auto">
  <name>Add weekly summary types + aggregation helper</name>
  <files>types/index.ts, lib/progress.ts</files>
  <action>
    - Add a `WeeklySummary` type containing totalMinutes, longestIntervalSec, avgLapses, sessionsCount, journalHighlights.
    - Implement `getWeeklySummary(startDate)` to aggregate from stored sessions.
    - Pull most recent 2â€“3 journal entries as highlights.
  </action>
  <verify>
    - Unit tests validate metrics aggregation.
  </verify>
  <done>
    - Weekly summary can be computed from local data.
  </done>
</task>

</tasks>

<verification>
- Weekly summary helper returns expected aggregate metrics.
</verification>

<success_criteria>
- Aggregator ready for UI consumption.
</success_criteria>

<output>
After completion, create `.planning/phases/04-weekly-review--recommendations/04-01-SUMMARY.md`
</output>
