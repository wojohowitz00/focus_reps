---
phase: 04-weekly-review--recommendations
plan: 02
type: execute
wave: 2
depends_on: ["04-01"]
files_modified:
  - app/(tabs)/progress.tsx
  - components/WeeklyReview.tsx
  - lib/progress.ts
  - types/index.ts
  - app/_layout.tsx
  - app/weekly-review.tsx
  - lib/storage.ts
  - __tests__/lib/storage.test.ts
  - __tests__/lib/practices.test.ts

autonomous: true
must_haves:
  truths:
    - "Weekly review shows total minutes, longest interval, lapses per session, and journal highlights"
    - "Weekly review recommends the next practice"
  artifacts:
    - path: "components/WeeklyReview.tsx"
      provides: "Weekly review UI"
    - path: "app/weekly-review.tsx"
      provides: "Weekly review screen"
  key_links:
    - from: "app/(tabs)/progress.tsx"
      to: "components/WeeklyReview.tsx"
      via: "Weekly summary"
      pattern: "WeeklyReview"
---

<objective>
Create the weekly review UI and recommendation logic.

Purpose: surface weekly metrics and suggest the next practice.
Output: weekly review component and screen, wired into progress flow.
</objective>

<execution_context>
@/Users/richardyu/.claude/get-shit-done/workflows/execute-plan.md
@/Users/richardyu/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-weekly-review--recommendations/04-RESEARCH.md

@app/(tabs)/progress.tsx
@lib/progress.ts
@types/index.ts
</context>

<tasks>

<task type="auto">
  <name>Add recommendation helper</name>
  <files>lib/progress.ts</files>
  <action>
    - Add `getWeeklyRecommendation(summary)` that returns a recommended practice ID + short rationale.
    - Use simple heuristics: high lapses or short intervals → Anchor Breath; low mood/high stress → Kindness Circuit; improving intervals → Thought Traffic or Body Sweep.
  </action>
  <verify>
    - Recommendation returns a valid practice type and non-empty rationale.
  </verify>
  <done>
    - Weekly recommendation helper exists.
  </done>
</task>

<task type="auto">
  <name>Build weekly review UI</name>
  <files>components/WeeklyReview.tsx, app/weekly-review.tsx</files>
  <action>
    - Create a weekly review component that displays summary metrics and journal highlights.
    - Show recommended next practice with rationale and a CTA to start.
  </action>
  <verify>
    - Review UI renders with sample data.
  </verify>
  <done>
    - Weekly review component ready for use in Progress screen.
  </done>
</task>

<task type="auto">
  <name>Wire weekly review to progress flow</name>
  <files>app/(tabs)/progress.tsx, app/_layout.tsx</files>
  <action>
    - Add navigation route for WeeklyReview screen.
    - Add button in Progress screen to open weekly review.
    - Pass weekly summary data into the review screen.
  </action>
  <verify>
    - Progress screen can open weekly review and display metrics.
  </verify>
  <done>
    - Weekly review is discoverable from Progress.
  </done>
</task>

</tasks>

<verification>
- Weekly review shows the required metrics and recommendation.
</verification>

<success_criteria>
- Users can view a weekly review and recommended next practice.
</success_criteria>

<output>
After completion, create `.planning/phases/04-weekly-review--recommendations/04-02-SUMMARY.md`
</output>
